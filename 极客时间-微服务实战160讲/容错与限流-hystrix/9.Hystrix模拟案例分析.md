# Hystrixæ¨¡æ‹Ÿæ¡ˆä¾‹åˆ†æ

## æºç éƒ¨åˆ†

è¿™é‡ŒHystrixæ¨¡æ‹Ÿæ¡ˆä¾‹æŒ‡çš„æ˜¯Hystrixå®˜ç½‘æºç ä¸­æä¾›çš„demoä»£ç ã€‚ [åœ°å€](https://github.com/Netflix/Hystrix/tree/master/hystrix-examples/src/main/java/com/netflix/hystrix/examples/demo)

ä»£ç çš„ä¸»è¦é€»è¾‘æ˜¯æ¨¡æ‹Ÿäº¤æ˜“çš„åœºæ™¯ï¼Œä¸»è¦åˆ†æˆä¸‹é¢4ä¸ªæ­¥éª¤ï¼š

![](https://oscimg.oschina.net/oscnet/up-33c43832483ed24907d031bf78608a1edf7.png)

å…·ä½“æºç è¿™é‡Œå°±ä¸è´´äº†ã€‚ æœ€æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼š

```java
 public void startDemo() {
        startMetricsMonitor();
        while (true) {
            runSimulatedRequestOnThread();
        }
    }

    public void runSimulatedRequestOnThread() {
        pool.execute(new Runnable() {

            @Override
            public void run() {
                HystrixRequestContext context = HystrixRequestContext.initializeContext();
                try {
                    executeSimulatedUserRequestForOrderConfirmationAndCreditCardPayment();

                    System.out.println("Request => " + HystrixRequestLog.getCurrentRequest().getExecutedCommandsAsString());
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    context.shutdown();
                }
            }

        });
    }
```


## Hystrix dashboard

![](https://oscimg.oschina.net/oscnet/up-77c293f2511fb5893ebed19d76454816a04.png)

å¦‚å›¾ï¼Œæ˜¯Hystrixè‡ªå·±æä¾›çš„ä¸€ä¸ªdashboardæ ·ä¾‹ã€‚ æˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸€ä¸‹dashboardå…·ä½“æœ‰å“ªäº›å‚æ•°å’ŒæŒ‡æ ‡ã€‚

![](https://oscimg.oschina.net/oscnet/up-4c8c3724bbc34b7a24ea26ab393f7130f3b.png)


## æ»šç­’å¼è®¾è®¡

ä¸Šé¢çš„dashboardæ•°æ®çš„ç»Ÿè®¡éƒ½æ˜¯åŸºäºä¸€ä¸ªæ—¶é—´æ»šç­’æ¥ç»Ÿè®¡çš„ã€‚å¤§è‡´å¦‚ä¸‹ğŸ‘‡

![](https://oscimg.oschina.net/oscnet/up-898c9e2b0ef5f3bfd2ebfd7b77599336804.png)

æ¯ç§’çš„æ•°æ®è¢«è®°å½•åœ¨ä¸€ä¸ªæ§½ä¸­ï¼Œæ²¡ç»è¿‡ä¸€ç§’æ–°çš„æ•°æ®æ·»åŠ åˆ°æ–°çš„æ§½ä¸­ï¼Œæœ€ä¹…çš„æ•°æ®å·²å‡ºæ»šç­’ã€‚




## å®éªŒæ­¥éª¤

#### 1. å…‹éš†Netflix Hystrixå’ŒHystrix-Dashboardé¡¹ç›®åˆ°æœ¬åœ°

```
https://github.com/Netflix/Hystrix.git
https://github.com/Netflix-Skunkworks/hystrix-dashboard
```

**æ³¨æ„**ï¼šhystrix-dashboardç¼ºå¤±ä¸€ä¸ª`gradle-wrapper.jar`æ–‡ä»¶ï¼Œå¯ä»¥å°†Hystrixä¸­çš„`wrapper`æ–‡ä»¶å¤¹å¤åˆ¶å¹¶è¦†ç›–hystrix-dashboardä¸‹çš„`wrapper`æ–‡ä»¶å¤¹ã€‚


#### 2. è¿è¡Œhystrix-example-webappåº”ç”¨

```
cd hystrix-examples-webapp
../gradlew appRun
```

æ‰“å¼€`http://localhost:8989/hystrix-examples-webapp`æ ¡éªŒ

#### 3. è¿è¡Œhystrix-dashboardåº”ç”¨

```
cd hystrix-dashboard
./gradlew appRun
```

æ‰“å¼€`http://localhost:7979/hystrix-dashboard`æ ¡éªŒ

æ·»åŠ `http://localhost:8989/hystrix-examples-webapp/hystrix.stream`ï¼Œå¹¶å¯åŠ¨hystrixæµç›‘æ§

##### 4. è¿è¡Œcurl.shè„šæœ¬è§¦å‘hystrixæµ

```sheel
while true; 
do curl "http://localhost:8989/hystrix-examples-webapp/"; 
done
```

##### 5. è§‚å¯Ÿhystrix-dashboardå®æ—¶æµ




