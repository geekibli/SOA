# 容错限流背后的需求

容错限流主要是在微服务架构下的需求。单体应用下不明显。

**思考一个问题：**

如果单个服务的可用性是99.99%，如果我们有30个微服务，每个微服务的可用性都是99.99%，那个整体架构的可用性是多少呢？

> 99.7% uptime
> 每个月2小时宕机时间 实际情况会更糟糕

复杂分布式系统架构中，通常会有很多依赖。如果一个应用不能对来自依赖故障进行隔离，那个应用本身就处在呗拖垮的风险中。
在一个高流量的网站用，某个单一后端一旦发生延迟，将会在数秒内导致所有应用资源被耗尽。

**这就是应用没有容错限流的坑所在。**

## 什么是服务依赖

一般互联网的请求都会依赖6～8个后端请求。

![](https://oscimg.oschina.net/oscnet/up-087202dd4ba7a9167d112700dcf3a7ab0d6.png)

当服务I发生延迟的时候，对导致请求很慢，吞吐量下降等。

![](https://oscimg.oschina.net/oscnet/up-f0cf4746628ef77c4cd7d70f058c1aacea1.png)


如果是在业务高峰期或者这个服务是个热点服务的话，会直接导致雪崩。如果没有对应措施，可能导致大量资源服务无法及时释放，最终导致整个系统的崩溃。

![](https://oscimg.oschina.net/oscnet/up-362583c427a3f20e20093212200c5f4b580.png)



