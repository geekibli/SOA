# 基于Eureka+Zuul+容器云的持续交付架构

## 金丝雀发布

1. 首先服务系统处于初始状态，所有的请求通过负载均衡器（比如Ribbon）路由到老系统上面
2. V2版本上线，V1版本不下线，把一部分流量负载到V2版本上面
3. 如果V2验证没有问题，把所有的V2全部上线，所有的V2全都负载上流量
4. 经过一段时间之后，把所有的流量负载到所有的V2版本上面

![](https://oscimg.oschina.net/oscnet/up-30af29e30237f4483df11da69d6423ae9c9.png)

以上过程就是金丝雀发布+蓝绿发布的过程。它要求具备两套生产

## 杨波老师实践的发布架构

![](https://oscimg.oschina.net/oscnet/up-22694c591d46c47725f1aa8c62686111128.png)