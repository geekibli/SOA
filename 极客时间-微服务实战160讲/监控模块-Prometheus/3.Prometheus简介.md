# Prometheus简介

[**Prometheus**](https://prometheus.io/)  
[**Prometheus-Github**](https://github.com/prometheus/prometheus)

![](https://oscimg.oschina.net/oscnet/up-b7d6077b95f4a38582bdea03b7725c9b2ab.png)


Prometheus, a Cloud Native Computing Foundation project, is a systems and service monitoring system. It collects metrics from configured targets at given intervals, evaluates rule expressions, displays the results, and can trigger alerts when specified conditions are observed.

The features that distinguish Prometheus from other metrics and monitoring systems are:

- A multi-dimensional data model (time series defined by metric name and set of key/value dimensions)
- PromQL, a powerful and flexible query language to leverage this dimensionality
- No dependency on distributed storage; single server nodes are autonomous
- An HTTP pull model for time series collection
- Pushing time series is supported via an intermediary gateway for batch jobs
- Targets are discovered via service discovery or static configuration
- Multiple modes of graphing and dashboarding support
- Support for hierarchical and horizontal federation


1. 开源监控工具
2. 时间序列数据库TSDB,golang实现
3. Soundcloud研发，源于谷歌Borgmon
4. 多维度（标签）, 拉模式（Pull-based）
5. 白盒&黑盒监控都支持，DevOps友好
6. Metrics & Alert，不是logging/tracing
7. 社区生态丰富
8. 单机性能：每秒消费百万级别时间序列，上千个targets


## 什么是时间序列

就是一个时间-序列的二位矩阵。

![](https://oscimg.oschina.net/oscnet/up-ec42951eb906338f92c2feff4dbfdbd9f21.png)

上面是4个不同的序列，随着时间的推移，所产生的事件结果的连接成为四个不同序列。


下面是几个产品的对比:

[**DB-Engines Ranking - Trend of Time Series DBMS Popularity**](https://db-engines.com/en/ranking_trend/time+series+dbms)

![](https://oscimg.oschina.net/oscnet/up-8af2223852a37cafe1587f76c3cbe7d0232.png)


可以看到Premotheus在2015年开始就不断的流行起来了，已经超过了很多老牌的时间序列数据库。



## Prometheus架构设计

[**prometheus-2.0-storage-layer-optimization**](https://cloud.redhat.com/blog)

![](https://oscimg.oschina.net/oscnet/up-ad6a3eacd5a4c4503436bf2b24ad2c3ec81.png)



## Prometheus存储设计

[****](https://prometheus.io/docs/prometheus/latest/storage/)


Prometheus包括一个本地磁盘时间序列数据库，但也可以选择与远程存储系统集成。


A Prometheus server's data directory looks something like this:

```text
./data
├── 01BKGV7JBM69T2G1BGBGM6KB12
│   └── meta.json
├── 01BKGTZQ1SYQJTR4PB43C8PD98
│   ├── chunks
│   │   └── 000001
│   ├── tombstones
│   ├── index
│   └── meta.json
├── 01BKGTZQ1HHWHV8FBJXW1Y3W0K
│   └── meta.json
├── 01BKGV7JC0RY8A6MACW02A2PJD
│   ├── chunks
│   │   └── 000001
│   ├── tombstones
│   ├── index
│   └── meta.json
├── chunks_head
│   └── 000001
└── wal
    ├── 000000002
    └── checkpoint.00000001
        └── 00000000
```




